(this["webpackJsonpjwt-boilerplate"]=this["webpackJsonpjwt-boilerplate"]||[]).push([[0],{142:function(e,t,n){},143:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(53),o=n.n(a),s=(n(141),n(142),n(11)),c=n(9),i=(n(143),n(48)),l=n(38),u=n(35),j=n(24),d=n.n(j),h=n(2);function m(e){return Object(h.jsx)("span",{className:"error",children:e.error})}var p=n(173),b=n(174),g=n(123),O=n(168),f=n(175),x=n(171);function w(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var v={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:w,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=w();return e?JSON.parse(atob(e.split(".")[1])).user:null}},S="/api/users/";var k={signup:function(e){return fetch(S+"signup",{method:"POST",body:e}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))})).then((function(e){var t=e.token;return v.setToken(t)}))},logout:function(){v.removeToken()},login:function(e){return fetch(S+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))})).then((function(e){var t=e.token;return v.setToken(t)}))},getUser:function(){return v.getUserFromToken()},getProfile:function(e){return console.log("getProfile calling"),fetch(S+e,{headers:{Authorization:"Bearer "+v.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error("Error from getProfile Request, check the server terminal!")}))}};function y(e,t){return e===t}function C(e){var t=Object(r.useState)({message:"",passwordError:!1}),n=Object(s.a)(t,2),a=n[0],o=n[1],j=Object(r.useState)({username:"",email:"",password:"",passwordConf:""}),w=Object(s.a)(j,2),v=w[0],S=w[1],C=Object(r.useState)(""),I=Object(s.a)(C,2),A=I[0],E=I[1];function N(e){S(Object(u.a)(Object(u.a)({},v),{},Object(l.a)({},e.target.name,e.target.value)))}var T=Object(c.g)();function U(){return(U=Object(i.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),y(v.password,v.passwordConf)){t.next=3;break}return t.abrupt("return",o({message:"Passwords Must Match!",passwordError:!0}));case 3:for(a in o({message:"",passwordError:!1}),(r=new FormData).append("photo",A),v)r.append(a,v[a]);return t.prev=7,t.next=10,k.signup(r);case 10:e.handleSignUpOrLogin(),T("/"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(7),console.log(t.t0),o({message:t.t0.message,passwordError:!1});case 18:case"end":return t.stop()}}),t,null,[[7,14]])})))).apply(this,arguments)}return Object(h.jsx)(p.a,{textAlign:"center",style:{height:"100vh",width:"100vw"},verticalAlign:"middle",children:Object(h.jsxs)(p.a.Column,{style:{maxWidth:450},children:[Object(h.jsxs)(b.a,{as:"h2",color:"teal",textAlign:"center",children:[Object(h.jsx)(g.a,{src:"https://i.imgur.com/Ql22AuM.png"})," Sign Up"]}),Object(h.jsxs)(O.a,{onSubmit:function(e){return U.apply(this,arguments)},children:[Object(h.jsxs)(f.a,{stacked:!0,children:[Object(h.jsx)(O.a.Input,{name:"username",placeholder:"username",value:v.username,onChange:N,required:!0}),Object(h.jsx)(O.a.Input,{type:"email",name:"email",placeholder:"email",value:v.email,onChange:N,required:!0}),Object(h.jsx)(O.a.Input,{error:a.passwordError,name:"password",type:"password",placeholder:"password",value:v.password,onChange:N,required:!0}),Object(h.jsx)(O.a.Input,{error:a.passwordError,name:"passwordConf",type:"password",placeholder:"Confirm Password",value:v.passwordConf,onChange:N,required:!0}),Object(h.jsx)(O.a.Field,{children:Object(h.jsx)(O.a.Input,{type:"file",name:"photo",placeholder:"upload image",onChange:function(e){console.log(e.target.files," < - this is e.target.files!"),E(e.target.files[0])}})}),Object(h.jsx)(x.a,{type:"submit",className:"btn",children:"Signup"})]}),a.message?Object(h.jsx)(m,{error:a.message}):null]})]})})}n(153);var I=n(33),A=n(170);function E(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],o=n[1],j=Object(r.useState)({email:"",password:""}),w=Object(s.a)(j,2),v=w[0],S=w[1],y=Object(c.g)();function C(e){S(Object(u.a)(Object(u.a)({},v),{},Object(l.a)({},e.target.name,e.target.value)))}function E(){return(E=Object(i.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,k.login(v);case 4:e.handleSignUpOrLogin(),y("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(h.jsx)(p.a,{textAlign:"center",style:{height:"100vh",width:"100vw"},verticalAlign:"middle",children:Object(h.jsxs)(p.a.Column,{style:{maxWidth:450},children:[Object(h.jsxs)(b.a,{as:"h2",color:"teal",textAlign:"center",children:[Object(h.jsx)(g.a,{src:"https://i.imgur.com/Ql22AuM.png"})," Log-in to your account"]}),Object(h.jsx)(O.a,{onSubmit:function(e){return E.apply(this,arguments)},children:Object(h.jsxs)(f.a,{stacked:!0,children:[Object(h.jsx)(O.a.Input,{type:"email",name:"email",placeholder:"email",value:v.email,onChange:C,required:!0}),Object(h.jsx)(O.a.Input,{name:"password",type:"password",placeholder:"password",value:v.password,onChange:C,required:!0}),Object(h.jsx)(x.a,{color:"teal",fluid:!0,size:"large",type:"submit",className:"btn",children:"Login"})]})}),Object(h.jsxs)(A.a,{children:["New to us? ",Object(h.jsx)(I.b,{to:"/signup",children:"Sign Up"})]}),a?Object(h.jsx)(m,{error:a}):null]})})}var N=n(78);function T(e){var t=e.loggedUser,n=e.handleLogout;return console.log(t,"loggedUser in header"),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b.a,{as:"h2",floated:"left",children:Object(h.jsx)(I.b,{to:"/",children:Object(h.jsx)(N.a,{style:{color:"white"},name:"home"})})}),Object(h.jsx)(b.a,{as:"h2",floated:"center",children:t?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(I.b,{to:"/",children:" Home "})}):null}),Object(h.jsx)(b.a,{as:"h2",floated:"right",children:Object(h.jsx)(I.b,{to:"",onClick:n,style:{fontSize:"30px",fontFamily:"Nunito, sans-serif;",color:"whitesmoke",textShadow:"2px 2px 4px black"},children:"Logout"})})]})}var U=n(169);function L(e){var t=e.swimmer,n=e.handleDeleteSwimmer,a=Object(r.useState)(!1),o=Object(s.a)(a,1)[0];return Object(h.jsxs)(U.a,{raised:!0,children:[Object(h.jsxs)(f.a,{textAlign:"center",children:[Object(h.jsxs)("p",{children:["Name: ",t.name]}),Object(h.jsxs)("p",{children:["Grade: ",t.grade]}),Object(h.jsxs)("p",{children:["Gender: ",t.gender]}),Object(h.jsxs)("p",{children:["Events: ",t.events]})]}),Object(h.jsx)(O.a,{onSubmit:function(e){e.preventDefault();var r=t._id;console.log(r,"<- the deleteSwimmer request"),n(r),o(!1)},children:Object(h.jsx)(x.a,{type:"submit",color:"red",children:"Delete Swimmer"})})]},t._id)}function D(e){var t=e.swimmer;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(T,{}),Object(h.jsx)("h1",{children:"Swimmer Details"}),Object(h.jsx)(L,{swimmer:t})]})}var P=n(124),q=n(167);n(154);function F(e){var t=e.handleAddSwimmer,n=Object(r.useState)({name:"",grade:"",gender:"",events:""}),a=Object(s.a)(n,2),o=a[0],c=a[1];function i(e){c(Object(u.a)(Object(u.a)({},o),{},Object(l.a)({},e.target.name,e.target.value)))}return Object(h.jsx)(U.a,{style:{width:"70%"},children:Object(h.jsxs)(O.a,{onSubmit:function(e){e.preventDefault(),t(o),c({name:"",grade:"",gender:"",events:""})},children:[Object(h.jsx)("h2",{children:"Add a New Swimmer:"}),Object(h.jsx)(O.a.Input,{className:"form-control",name:"name",value:o.name,placeholder:"Name",onChange:i,required:!0}),Object(h.jsx)(O.a.Input,{className:"form-control",name:"grade",value:o.grade,placeholder:"Grade",onChange:i,required:!0}),Object(h.jsx)(O.a.Input,{className:"form-control",name:"gender",value:o.gender,placeholder:"Gender",onChange:i,required:!0}),Object(h.jsx)(O.a.Input,{className:"form-control",name:"events",value:o.events,placeholder:"Events",onChange:i,required:!0}),Object(h.jsx)(x.a,{type:"submit",className:"btn",children:"Add Swimmer"})]})})}function B(e){var t=e.swimmers,n=e.itemsPerRow,r=e.handleDeleteSwimmer;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(U.a.Group,{itemsPerRow:n,stackable:!0,children:t.map((function(e){return Object(h.jsx)(L,{swimmer:e,handleDeleteSwimmer:r},e._id)}))})})}var R="/api/swimmer";function W(e){return console.log("this is the swimmer",e),fetch(R,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+v.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error("Check your server terminal for error.")}))}function z(e){return fetch("".concat(R,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+v.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error(e.error,"<< res.error from deleteSwimmer(): swimmerAPI")}))}function J(){return fetch(R,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+v.getToken()}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err,"<< response.err create(): swimmerAPI")}))}))}function G(e){var t=e.handleLogout,n=Object(r.useState)([]),a=Object(s.a)(n,2),o=a[0],c=a[1];function l(){return u.apply(this,arguments)}function u(){return(u=Object(i.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J();case 3:t=e.sent,c(Object(P.a)(t.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0,"<-erroe in getSwimmers");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function j(){return(j=Object(i.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(t);case 3:n=e.sent,console.log(n),l(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error in the handleAddSwimmer function: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function m(){return(m=Object(i.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t);case 3:n=e.sent,console.log(n),l(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error in the handleDeleteSwimmer function");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){l()}),[]),Object(h.jsxs)(q.a,{className:"backgroundImg",children:[Object(h.jsx)("img",{className:"backgroundImg",src:"https://i.imgur.com/UeA0BjR.jpg",alt:"img"}),Object(h.jsx)(T,{handleLogout:t}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"WelcomeText",children:[Object(h.jsx)("h1",{children:"Welcome to Swimmingly!"}),Object(h.jsx)("h3",{children:"Swimmingly is an easy team manager that tracks your swim teams members as well as their times and events"}),Object(h.jsx)("br",{})]}),Object(h.jsxs)(p.a,{children:[Object(h.jsx)(p.a.Row,{centered:!0,children:Object(h.jsx)(F,{className:"AddSwimmer",handleAddSwimmer:function(e){return j.apply(this,arguments)}})}),Object(h.jsx)(p.a.Row,{centered:!0,children:Object(h.jsx)(p.a.Column,{style:{maxWidth:750},children:Object(h.jsx)(B,{swimmers:o,handleDeleteSwimmer:function(e){return m.apply(this,arguments)},itemsPerRow:5})})})]})]})}var M=function(){var e=Object(r.useState)(k.getUser()),t=Object(s.a)(e,2),n=t[0],a=t[1];function o(){a(k.getUser())}function i(){k.logout(),a(null)}return n?Object(h.jsxs)(c.d,{children:[Object(h.jsx)(c.b,{path:"/",element:Object(h.jsx)(G,{loggedInUser:n,handleLogout:i})}),Object(h.jsx)(c.b,{path:"/:_id",element:Object(h.jsx)(D,{loggedInUser:n,handleLogout:i})}),Object(h.jsx)(c.b,{path:"/login",element:Object(h.jsx)(E,{handleSignUpOrLogin:o})}),Object(h.jsx)(c.b,{path:"/signup",element:Object(h.jsx)(C,{handleSignUpOrLogin:o})})]}):Object(h.jsxs)(c.d,{children:[Object(h.jsx)(c.b,{path:"/login",element:Object(h.jsx)(E,{handleSignUpOrLogin:o})}),Object(h.jsx)(c.b,{path:"/signup",element:Object(h.jsx)(C,{handleSignUpOrLogin:o})}),Object(h.jsx)(c.b,{path:"/*",element:Object(h.jsx)(c.a,{to:"/login"})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(h.jsx)(I.a,{children:Object(h.jsx)(M,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[155,1,2]]]);
//# sourceMappingURL=main.ddecb0de.chunk.js.map