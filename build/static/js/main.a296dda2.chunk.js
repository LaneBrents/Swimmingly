(this["webpackJsonpjwt-boilerplate"]=this["webpackJsonpjwt-boilerplate"]||[]).push([[0],{146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},156:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(55),c=n.n(a),s=(n(145),n(146),n(11)),o=n(9),i=(n(147),n(31)),l=n(178),j=n(184),u=n(127),d=n(177),m=(n(148),n(2));function h(e){var t=e.loggedUser,n=e.handleLogout,a=Object(r.useState)(!1),c=Object(s.a)(a,2);c[0],c[1];return Object(m.jsxs)(l.a,{borderless:!0,className:"nav-bar",children:[Object(m.jsx)(l.a.Item,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(i.b,{to:"/",id:"logo",style:{color:"yellow",fontFamily:"Pacifico",fontSize:"20px",letterSpacing:".05rem"},children:"Swimmingly"})})}),Object(m.jsxs)(l.a.Menu,{position:"right",children:[Object(m.jsx)(l.a.Item,{children:Object(m.jsx)(i.b,{to:"/".concat(null===t||void 0===t?void 0:t.username),style:{color:"black"},children:Object(m.jsx)(u.a,{src:null!==t&&void 0!==t&&t.photoUrl?null===t||void 0===t?void 0:t.photoUrl:"https://react.semantic-ui.com/images/wireframe/square-image.png",avatar:!0})})}),Object(m.jsx)(d.a,{item:!0,icon:"bars yellow",children:Object(m.jsxs)(d.a.Menu,{children:[Object(m.jsx)(d.a.Item,{text:"Dashboard",href:"/Dashboard"}),Object(m.jsx)(d.a.Divider,{}),Object(m.jsx)(d.a.Item,{as:"a",href:"/MyTeam",children:"My Team"}),Object(m.jsx)(d.a.Item,{text:"Heatsheets",href:"/Heatsheet"}),Object(m.jsx)(d.a.Item,{text:"Schedule",href:"/Calendar"}),Object(m.jsx)(d.a.Divider,{}),Object(m.jsx)(d.a.Item,{text:"Profile Settings",icon:"setting"}),Object(m.jsx)(d.a.Item,{text:"Sign Out",onClick:n,icon:"sign out"})]})})]})]})}n(156);var b=function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(h,{}),Object(m.jsx)("div",{className:"page",children:Object(m.jsx)(o.b,{})})]})},p=n(50),g=n(46),O=n(36),x=n(25),f=n.n(x);function w(e){return Object(m.jsx)("span",{className:"error",children:e.error})}var v=n(185),S=n(179),y=n(186),k=n(182);function I(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var N={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:I,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=I();return e?JSON.parse(atob(e.split(".")[1])).user:null}},T="/api/users/";var C={signup:function(e){return fetch(T+"signup",{method:"POST",body:e}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))})).then((function(e){var t=e.token;return N.setToken(t)}))},logout:function(){N.removeToken()},login:function(e){return fetch(T+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))})).then((function(e){var t=e.token;return N.setToken(t)}))},getUser:function(){return N.getUserFromToken()},getProfile:function(e){return console.log("getProfile calling"),fetch(T+e,{headers:{Authorization:"Bearer "+N.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error("Error from getProfile Request, check the server terminal!")}))}};function A(e,t){return e===t}function E(e){var t=Object(r.useState)({message:"",passwordError:!1}),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)({username:"",email:"",password:"",passwordConf:""}),l=Object(s.a)(i,2),d=l[0],h=l[1],b=Object(r.useState)(""),x=Object(s.a)(b,2),I=x[0],N=x[1];function T(e){h(Object(O.a)(Object(O.a)({},d),{},Object(g.a)({},e.target.name,e.target.value)))}var E=Object(o.h)();function U(){return(U=Object(p.a)(f.a.mark((function t(n){var r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),A(d.password,d.passwordConf)){t.next=3;break}return t.abrupt("return",c({message:"Passwords Must Match!",passwordError:!0}));case 3:for(a in c({message:"",passwordError:!1}),(r=new FormData).append("photo",I),d)r.append(a,d[a]);return t.prev=7,t.next=10,C.signup(r);case 10:e.handleSignUpOrLogin(),E("/home"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(7),console.log(t.t0),c({message:t.t0.message,passwordError:!1});case 18:case"end":return t.stop()}}),t,null,[[7,14]])})))).apply(this,arguments)}return Object(m.jsx)(v.a,{textAlign:"center",style:{height:"100vh",width:"100vw"},verticalAlign:"middle",children:Object(m.jsxs)(v.a.Column,{style:{maxWidth:450},children:[Object(m.jsxs)(j.a,{as:"h2",color:"teal",textAlign:"center",children:[Object(m.jsx)(u.a,{src:"https://i.imgur.com/Ql22AuM.png"})," Sign Up"]}),Object(m.jsxs)(S.a,{onSubmit:function(e){return U.apply(this,arguments)},children:[Object(m.jsxs)(y.a,{stacked:!0,children:[Object(m.jsx)(S.a.Input,{name:"username",placeholder:"username",value:d.username,onChange:T,required:!0}),Object(m.jsx)(S.a.Input,{type:"email",name:"email",placeholder:"email",value:d.email,onChange:T,required:!0}),Object(m.jsx)(S.a.Input,{error:a.passwordError,name:"password",type:"password",placeholder:"password",value:d.password,onChange:T,required:!0}),Object(m.jsx)(S.a.Input,{error:a.passwordError,name:"passwordConf",type:"password",placeholder:"Confirm Password",value:d.passwordConf,onChange:T,required:!0}),Object(m.jsx)(S.a.Field,{children:Object(m.jsx)(S.a.Input,{type:"file",name:"photo",placeholder:"upload image",onChange:function(e){console.log(e.target.files," < - this is e.target.files!"),N(e.target.files[0])}})}),Object(m.jsx)(k.a,{type:"submit",className:"btn",children:"Signup"})]}),a.message?Object(m.jsx)(w,{error:a.message}):null]})]})})}n(159);var U=n(181);function D(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],c=n[1],l=Object(r.useState)({email:"",password:""}),d=Object(s.a)(l,2),h=d[0],b=d[1],x=Object(o.h)();function I(e){b(Object(O.a)(Object(O.a)({},h),{},Object(g.a)({},e.target.name,e.target.value)))}function N(){return(N=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,C.login(h);case 4:e.handleSignUpOrLogin(),x("/home"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),c(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(m.jsx)(v.a,{textAlign:"center",style:{height:"100vh",width:"100vw"},verticalAlign:"middle",children:Object(m.jsxs)(v.a.Column,{style:{maxWidth:450},children:[Object(m.jsxs)(j.a,{as:"h2",color:"teal",textAlign:"center",children:[Object(m.jsx)(u.a,{src:"https://i.imgur.com/Ql22AuM.png"})," Log-in to your account"]}),Object(m.jsx)(S.a,{onSubmit:function(e){return N.apply(this,arguments)},children:Object(m.jsxs)(y.a,{stacked:!0,children:[Object(m.jsx)(S.a.Input,{type:"email",name:"email",placeholder:"email",value:h.email,onChange:I,required:!0}),Object(m.jsx)(S.a.Input,{name:"password",type:"password",placeholder:"password",value:h.password,onChange:I,required:!0}),Object(m.jsx)(k.a,{color:"teal",fluid:!0,size:"large",type:"submit",className:"btn",children:"Login"})]})}),Object(m.jsxs)(U.a,{children:["New to us? ",Object(m.jsx)(i.b,{to:"/signup",children:"Sign Up"})]}),a?Object(m.jsx)(w,{error:a}):null]})})}var P=n(176);n(160);function L(e){e.handleLogout;return Object(m.jsxs)(P.a,{className:"backgroundImg",children:[Object(m.jsx)("img",{className:"backgroundImg",src:"https://i.imgur.com/UeA0BjR.jpg",alt:"img"}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{className:"WelcomeText",children:[Object(m.jsx)("h1",{children:"Welcome to Swimmingly"}),Object(m.jsx)("h2",{children:"An easy-to-use team manager that"}),Object(m.jsx)("h1",{children:"Takes the Stress out of Running your Swim Team"})]}),Object(m.jsxs)("div",{className:"GetStarted",children:[Object(m.jsx)("h2",{children:"Get started!"}),Object(m.jsx)("a",{href:"/MyTeam",className:"button",children:Object(m.jsx)(k.a,{basic:!0,color:"yellow",children:" My Team "})})]})]})}var q=n(128),M=(n(161),n(180));n(162);function R(e){var t=e.handleAddSwimmer,n=Object(r.useState)({name:"",grade:"",gender:"",events:""}),a=Object(s.a)(n,2),c=a[0],o=a[1];function i(e){o(Object(O.a)(Object(O.a)({},c),{},Object(g.a)({},e.target.name,e.target.value)))}return Object(m.jsx)(M.a,{className:"card",style:{width:"77%",background:"rgb(22, 58, 105)"},children:Object(m.jsxs)(S.a,{onSubmit:function(e){e.preventDefault(),t(c),o({name:"",grade:"",gender:"",events:""})},children:[Object(m.jsx)("h3",{children:"Add a Swimmer:"}),Object(m.jsxs)(S.a.Group,{style:{margin:"0 auto"},children:[Object(m.jsx)(S.a.Input,{className:"form-control",name:"name",value:c.name,placeholder:"Name",onChange:i,required:!0}),Object(m.jsx)(S.a.Input,{className:"form-control",name:"grade",value:c.grade,placeholder:"Grade",onChange:i,required:!0}),Object(m.jsx)(S.a.Input,{className:"form-control",name:"gender",value:c.gender,placeholder:"Gender",onChange:i,required:!0}),Object(m.jsx)(S.a.Input,{className:"form-control",name:"events",value:c.events,placeholder:"Events",onChange:i,required:!0})]}),Object(m.jsx)(k.a,{style:{margin:"5px"},type:"submit",color:"blue",className:"btn",children:"Add Swimmer"})]})})}n(163);function B(e){var t=e.swimmer,n=e.handleDeleteSwimmer,a=Object(r.useState)(!1),c=Object(s.a)(a,1)[0];return Object(m.jsxs)(M.a,{className:"card",raised:!0,children:[Object(m.jsxs)(y.a,{className:"content",children:[Object(m.jsxs)("p",{children:["Name: ",t.name]}),Object(m.jsxs)("p",{children:["Grade: ",t.grade]}),Object(m.jsxs)("p",{children:["Gender: ",t.gender]}),Object(m.jsxs)("p",{children:["Events: ",t.events]})]}),Object(m.jsx)(S.a,{onSubmit:function(e){e.preventDefault();var r=t._id;console.log(r,"<- the deleteSwimmer request"),n(r),c(!1)},children:Object(m.jsx)(k.a,{type:"submit",color:"red",children:"Delete Swimmer"})})]},t._id)}function F(e){var t=e.swimmers,n=e.itemsPerRow,r=e.handleDeleteSwimmer;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(M.a.Group,{itemsPerRow:n,stackable:!0,children:t.map((function(e){return Object(m.jsx)(B,{swimmer:e,handleDeleteSwimmer:r},e._id)}))})})}var G="/api/swimmer";function W(e){return console.log("this is the swimmer",e),fetch(G,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+N.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error("Check your server terminal for error.")}))}function z(e){return fetch("".concat(G,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+N.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error(e.error,"<< res.error from deleteSwimmer(): swimmerAPI")}))}function J(){return fetch(G,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+N.getToken()}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err,"<< response.err create(): swimmerAPI")}))}))}function H(e){e.handleLogout;var t=Object(r.useState)([]),n=Object(s.a)(t,2),a=n[0],c=n[1];function o(){return i.apply(this,arguments)}function i(){return(i=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J();case 3:t=e.sent,c(Object(q.a)(t.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0,"<-erroe in getSwimmers");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function l(){return(l=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(t);case 3:n=e.sent,console.log(n),o(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error in the handleAddSwimmer function: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function j(){return(j=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t);case 3:n=e.sent,console.log(n),o(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error in the handleDeleteSwimmer function");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){o()}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(P.a,{className:"backgroundImg",children:[Object(m.jsx)("img",{className:"backgroundImg",src:"https://i.imgur.com/UeA0BjR.jpg",alt:"img"}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{className:"WelcomeText",children:Object(m.jsx)("h1",{children:"Swimmers"})}),Object(m.jsxs)(v.a,{children:[Object(m.jsx)(v.a.Row,{centered:!0,children:Object(m.jsx)(R,{className:"AddSwimmer",handleAddSwimmer:function(e){return l.apply(this,arguments)}})}),Object(m.jsx)(v.a.Row,{className:"cards",centered:!0,children:Object(m.jsx)(v.a.Column,{style:{maxWidth:750},children:Object(m.jsx)(F,{swimmers:a,handleDeleteSwimmer:function(e){return j.apply(this,arguments)},itemsPerRow:6})})})]})]})})}var _=function(){var e=Object(o.h)(),t=Object(r.useState)(C.getUser()),n=Object(s.a)(t,2),a=n[0],c=n[1];function i(){c(C.getUser())}function l(){C.logout(),c(null),e("/")}return a?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(o.e,{children:Object(m.jsxs)(o.c,{path:"/",element:Object(m.jsx)(b,{}),children:[Object(m.jsx)(o.c,{index:!0,element:Object(m.jsx)(L,{})}),Object(m.jsx)(o.c,{path:"/MyTeam",element:Object(m.jsx)(H,{loggedInUser:a,handleLogout:l})}),Object(m.jsx)(o.c,{path:"/login",element:Object(m.jsx)(D,{handleSignUpOrLogin:i})}),Object(m.jsx)(o.c,{path:"/signup",element:Object(m.jsx)(E,{handleSignUpOrLogin:i})})]})})}):Object(m.jsxs)(o.e,{children:[Object(m.jsx)(o.c,{path:"/",element:Object(m.jsx)(L,{loggedUser:a,handleLogout:l})}),Object(m.jsx)(o.c,{path:"/login",element:Object(m.jsx)(D,{handleSignUpOrLogin:i})}),Object(m.jsx)(o.c,{path:"/signup",element:Object(m.jsx)(E,{handleSignUpOrLogin:i})}),Object(m.jsx)(o.c,{path:"/*",element:Object(m.jsx)(o.a,{to:"/login"})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(m.jsx)(i.a,{children:Object(m.jsx)(_,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[164,1,2]]]);
//# sourceMappingURL=main.a296dda2.chunk.js.map